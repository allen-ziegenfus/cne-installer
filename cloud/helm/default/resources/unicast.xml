<?xml version="1.0"?>

<config
	xmlns="urn:org:jgroups"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="urn:org:jgroups http://www.jgroups.org/schema/jgroups-4.1.xsd"
>
	<TCP
		bind_port="{{ (index .Values.service.ports 0).port }}"
		max_bundle_size="64K"
		port_range="1"
		recv_buf_size="${tcp.recv_buf_size:5M}"
		send_buf_size="${tcp.send_buf_size:5M}"
		sock_conn_timeout="300"
		thread_pool.enabled="true"
		thread_pool.keep_alive_time="5000"
		thread_pool.max_threads="8"
		thread_pool.min_threads="2"
	/>
	<dns.DNS_PING
		dns_query='_cluster._tcp.{{ include "liferay.name" $ }}-headless.{{ include "liferay.namespace" $ }}.svc.cluster.local'
		dns_record_type="SRV"
	/>
	<MERGE3 max_interval="30000" min_interval="10000" />
	<FD_SOCK />
	<FD_ALL interval="3000" timeout="9000" />
	<VERIFY_SUSPECT timeout="1500" />
	<BARRIER />
	<pbcast.NAKACK2 discard_delivered_msgs="true" use_mcast_xmit="false" />
	<UNICAST3 />
	<pbcast.STABLE
		stability_delay="1000" desired_avg_gossip="50000" max_bytes="4M"
	/>
	<pbcast.GMS
		print_local_addr="true" join_timeout="2000"
	/>
	<UFC max_credits="2M" min_threshold="0.4" />
	<MFC max_credits="2M" min_threshold="0.4" />
	<FRAG2 frag_size="60K" />
	<pbcast.STATE_TRANSFER />
</config>